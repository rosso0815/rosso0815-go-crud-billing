// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: invoice.sql

package db_gen

import (
	"context"

	"github.com/jackc/pgx/v5/pgconn"
)

const invoiceByCustomerAndMonthAndYear = `-- name: InvoiceByCustomerAndMonthAndYear :one
select invoice_id from invoice
where
	customer_id = $1
AND
	invoice_month = $2
AND
	invoice_year = $3
`

type InvoiceByCustomerAndMonthAndYearParams struct {
	CustomerID   int `json:"customer_id"`
	InvoiceMonth int `json:"invoice_month"`
	InvoiceYear  int `json:"invoice_year"`
}

func (q *Queries) InvoiceByCustomerAndMonthAndYear(ctx context.Context, db DBTX, arg InvoiceByCustomerAndMonthAndYearParams) (int, error) {
	row := db.QueryRow(ctx, invoiceByCustomerAndMonthAndYear, arg.CustomerID, arg.InvoiceMonth, arg.InvoiceYear)
	var invoice_id int
	err := row.Scan(&invoice_id)
	return invoice_id, err
}

const invoiceDeleteById = `-- name: InvoiceDeleteById :exec
DELETE FROM invoice WHERE invoice_id = $1
`

func (q *Queries) InvoiceDeleteById(ctx context.Context, db DBTX, invoiceID int) error {
	_, err := db.Exec(ctx, invoiceDeleteById, invoiceID)
	return err
}

const invoiceGetById = `-- name: InvoiceGetById :one
select
  invoice_id, created_at, modified_at, customer_id, invoice_month, invoice_year, remark, invoice_modified_at, ahv, alv, quellensteuer, hours_total, salary_hour, bill_add, bill_sum, bill_payed, bill_payed_at
from
	invoice i
where
	i.invoice_id = $1
`

func (q *Queries) InvoiceGetById(ctx context.Context, db DBTX, invoiceID int) (Invoice, error) {
	row := db.QueryRow(ctx, invoiceGetById, invoiceID)
	var i Invoice
	err := row.Scan(
		&i.InvoiceID,
		&i.CreatedAt,
		&i.ModifiedAt,
		&i.CustomerID,
		&i.InvoiceMonth,
		&i.InvoiceYear,
		&i.Remark,
		&i.InvoiceModifiedAt,
		&i.Ahv,
		&i.Alv,
		&i.Quellensteuer,
		&i.HoursTotal,
		&i.SalaryHour,
		&i.BillAdd,
		&i.BillSum,
		&i.BillPayed,
		&i.BillPayedAt,
	)
	return i, err
}

const invoiceInsert = `-- name: InvoiceInsert :one
INSERT INTO invoice
    (
        customer_id,
        invoice_month,
        invoice_year,
        remark,
        invoice_modified_at,
        ahv,
        alv,
        quellensteuer,
        hours_total,
        salary_hour,
        bill_add,
        bill_sum,
        bill_payed,
        bill_payed_at
    )
VALUES
    (	$1,
        $2,
        $3,
        $4,
        now(),
        $5,
        $6,
        $7,
        $8,
        $9,
        $10,
        $11,
        false,
        now()
        )
returning invoice_id
`

type InvoiceInsertParams struct {
	CustomerID    int     `json:"customer_id"`
	InvoiceMonth  int     `json:"invoice_month"`
	InvoiceYear   int     `json:"invoice_year"`
	Remark        string  `json:"remark"`
	Ahv           float64 `json:"ahv"`
	Alv           float64 `json:"alv"`
	Quellensteuer float64 `json:"quellensteuer"`
	Totalhours    float64 `json:"totalhours"`
	SalaryHour    float64 `json:"salary_hour"`
	BillAdd       float64 `json:"bill_add"`
	BillSum       float64 `json:"bill_sum"`
}

func (q *Queries) InvoiceInsert(ctx context.Context, db DBTX, arg InvoiceInsertParams) (int, error) {
	row := db.QueryRow(ctx, invoiceInsert,
		arg.CustomerID,
		arg.InvoiceMonth,
		arg.InvoiceYear,
		arg.Remark,
		arg.Ahv,
		arg.Alv,
		arg.Quellensteuer,
		arg.Totalhours,
		arg.SalaryHour,
		arg.BillAdd,
		arg.BillSum,
	)
	var invoice_id int
	err := row.Scan(&invoice_id)
	return invoice_id, err
}

const invoicePayed = `-- name: InvoicePayed :execresult
update invoice
set
    bill_payed = true,
    bill_payed_at = now()
where
   invoice_id = $1
`

func (q *Queries) InvoicePayed(ctx context.Context, db DBTX, invoiceID int) (pgconn.CommandTag, error) {
	return db.Exec(ctx, invoicePayed, invoiceID)
}

const invoiceUnPayed = `-- name: InvoiceUnPayed :execresult
update invoice
set
    bill_payed = false,
    bill_payed_at = now()
where
   invoice_id = $1
`

func (q *Queries) InvoiceUnPayed(ctx context.Context, db DBTX, invoiceID int) (pgconn.CommandTag, error) {
	return db.Exec(ctx, invoiceUnPayed, invoiceID)
}

const invoiceUpdate = `-- name: InvoiceUpdate :execresult
update invoice
set
    customer_id = $1,
    invoice_month = $2,
    invoice_year = $3,
    remark	= $4,
    invoice_modified_at = now(),
    ahv = $5,
    alv = $6,
    quellensteuer = $7,
    hours_total = $8,
    salary_hour = $9,
    bill_add = $10,
    bill_sum = $11,
    bill_payed = false,
    bill_payed_at = now()
where
   invoice_id = $12
`

type InvoiceUpdateParams struct {
	CustomerID    int     `json:"customer_id"`
	InvoiceMonth  int     `json:"invoice_month"`
	InvoiceYear   int     `json:"invoice_year"`
	Remark        string  `json:"remark"`
	Ahv           float64 `json:"ahv"`
	Alv           float64 `json:"alv"`
	Quellensteuer float64 `json:"quellensteuer"`
	Totalhours    float64 `json:"totalhours"`
	SalaryHour    float64 `json:"salary_hour"`
	BillAdd       float64 `json:"bill_add"`
	BillSum       float64 `json:"bill_sum"`
	InvoiceID     int     `json:"invoice_id"`
}

func (q *Queries) InvoiceUpdate(ctx context.Context, db DBTX, arg InvoiceUpdateParams) (pgconn.CommandTag, error) {
	return db.Exec(ctx, invoiceUpdate,
		arg.CustomerID,
		arg.InvoiceMonth,
		arg.InvoiceYear,
		arg.Remark,
		arg.Ahv,
		arg.Alv,
		arg.Quellensteuer,
		arg.Totalhours,
		arg.SalaryHour,
		arg.BillAdd,
		arg.BillSum,
		arg.InvoiceID,
	)
}

const invoiceentryGetByInvoiceidAndDay = `-- name: InvoiceentryGetByInvoiceidAndDay :one
select
    invoiceentry_id,
    invoice_id,
    work_day,
    work_hours
from
    invoiceentry
where
    invoice_id = $1
AND
    work_day = $2
`

type InvoiceentryGetByInvoiceidAndDayParams struct {
	InvoiceID int `json:"invoice_id"`
	WorkDay   int `json:"work_day"`
}

func (q *Queries) InvoiceentryGetByInvoiceidAndDay(ctx context.Context, db DBTX, arg InvoiceentryGetByInvoiceidAndDayParams) (Invoiceentry, error) {
	row := db.QueryRow(ctx, invoiceentryGetByInvoiceidAndDay, arg.InvoiceID, arg.WorkDay)
	var i Invoiceentry
	err := row.Scan(
		&i.InvoiceentryID,
		&i.InvoiceID,
		&i.WorkDay,
		&i.WorkHours,
	)
	return i, err
}

const invoiceentryInsert = `-- name: InvoiceentryInsert :execresult
INSERT INTO invoiceEntry
    (invoice_id, work_day, work_hours)
VALUES
    ($1, $2, $3)
`

type InvoiceentryInsertParams struct {
	InvoiceID int     `json:"invoice_id"`
	WorkDay   int     `json:"work_day"`
	WorkHours float64 `json:"work_hours"`
}

func (q *Queries) InvoiceentryInsert(ctx context.Context, db DBTX, arg InvoiceentryInsertParams) (pgconn.CommandTag, error) {
	return db.Exec(ctx, invoiceentryInsert, arg.InvoiceID, arg.WorkDay, arg.WorkHours)
}

const invoiceentryUpdate = `-- name: InvoiceentryUpdate :execresult
UPDATE invoiceEntry
SET
    work_hours = $1
WHERE
    invoice_id = $2
AND
    work_day = $3
`

type InvoiceentryUpdateParams struct {
	WorkHours float64 `json:"work_hours"`
	InvoiceID int     `json:"invoice_id"`
	WorkDay   int     `json:"work_day"`
}

func (q *Queries) InvoiceentryUpdate(ctx context.Context, db DBTX, arg InvoiceentryUpdateParams) (pgconn.CommandTag, error) {
	return db.Exec(ctx, invoiceentryUpdate, arg.WorkHours, arg.InvoiceID, arg.WorkDay)
}

const invoicesList = `-- name: InvoicesList :many
select
    i.invoice_id
from
    invoice i, customer c
where
    i.customer_id = c.customer_id
and
    (
        c.customer_id::text like '%' || $1::text || '%'
    or
        c.first_name ilike '%' || $1::text || '%'
    or
        c.last_name ilike '%' || $1::text || '%'
    )
ORDER BY i.invoice_id DESC
LIMIT
    $3
OFFSET
    $2
`

type InvoicesListParams struct {
	Search    string `json:"search"`
	PageCount int64  `json:"page_count"`
	PageSize  int64  `json:"page_size"`
}

func (q *Queries) InvoicesList(ctx context.Context, db DBTX, arg InvoicesListParams) ([]int, error) {
	rows, err := db.Query(ctx, invoicesList, arg.Search, arg.PageCount, arg.PageSize)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []int
	for rows.Next() {
		var invoice_id int
		if err := rows.Scan(&invoice_id); err != nil {
			return nil, err
		}
		items = append(items, invoice_id)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}
